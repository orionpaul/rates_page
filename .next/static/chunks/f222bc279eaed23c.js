(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,56691,e=>{"use strict";e.s(["default",()=>i]);var r=e.i(16918),s=e.i(44661);e.i(96295);var t=e.i(54134);e.i(19516);var a=e.i(59822),l=e.i(77795),d=e.i(71227);function i(){let[e,i]=(0,s.useState)([]),[c,n]=(0,s.useState)(!0),[o,x]=(0,s.useState)(!1),{userData:m}=(0,d.useAuth)(),[u,h]=(0,s.useState)({email:"",password:"",role:"editor"});(0,s.useEffect)(()=>{if((null==m?void 0:m.role)!=="admin")return void alert("Access denied. Admin only.");g()},[m]);let g=async()=>{n(!0);try{let e=(await (0,t.getDocs)((0,t.collection)(l.db,"users"))).docs.map(e=>({uid:e.id,...e.data()}));i(e)}catch(e){console.error("Error fetching users:",e)}finally{n(!1)}},p=async()=>{try{let e=await (0,a.createUserWithEmailAndPassword)(l.auth,u.email,u.password);await (0,t.addDoc)((0,t.collection)(l.db,"users"),{uid:e.user.uid,email:u.email,role:u.role,createdAt:new Date,createdBy:(null==m?void 0:m.email)||"unknown"}),h({email:"",password:"",role:"editor"}),x(!1),g(),alert("User created successfully")}catch(e){console.error("Error adding user:",e),alert("Failed to create user: ".concat(e instanceof Error?e.message:"Unknown error"))}},y=async e=>{if(confirm("Are you sure you want to delete this user?"))try{await (0,t.deleteDoc)((0,t.doc)(l.db,"users",e)),g(),alert("User deleted successfully")}catch(e){console.error("Error deleting user:",e),alert("Failed to delete user")}};return(null==m?void 0:m.role)!=="admin"?(0,r.jsxs)("div",{className:"bg-red-50 border border-red-200 rounded-lg p-6",children:[(0,r.jsx)("h3",{className:"text-red-800 font-semibold",children:"Access Denied"}),(0,r.jsx)("p",{className:"text-red-600 mt-2",children:"Only administrators can manage users."})]}):c?(0,r.jsx)("div",{children:"Loading..."}):(0,r.jsxs)("div",{children:[(0,r.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,r.jsx)("h2",{className:"text-3xl font-bold text-gray-800",children:"Manage Users"}),(0,r.jsx)("button",{onClick:()=>x(!o),className:"bg-cbz-red text-white px-4 py-2 rounded hover:bg-red-700 transition",children:o?"Cancel":"Add User"})]}),o&&(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow p-6 mb-6",children:[(0,r.jsx)("h3",{className:"text-xl font-bold text-gray-800 mb-4",children:"Add New User"}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email Address"}),(0,r.jsx)("input",{type:"email",value:u.email,onChange:e=>h({...u,email:e.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded focus:ring-2 focus:ring-cbz-red outline-none",placeholder:"user@example.com"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Password"}),(0,r.jsx)("input",{type:"password",value:u.password,onChange:e=>h({...u,password:e.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded focus:ring-2 focus:ring-cbz-red outline-none",placeholder:"Min 6 characters"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Role"}),(0,r.jsxs)("select",{value:u.role,onChange:e=>h({...u,role:e.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded focus:ring-2 focus:ring-cbz-red outline-none",children:[(0,r.jsx)("option",{value:"editor",children:"Editor"}),(0,r.jsx)("option",{value:"admin",children:"Admin"})]})]})]}),(0,r.jsxs)("div",{className:"mt-4 flex gap-2",children:[(0,r.jsx)("button",{onClick:p,className:"bg-cbz-red text-white px-6 py-2 rounded hover:bg-red-700 transition",children:"Create User"}),(0,r.jsx)("button",{onClick:()=>{x(!1),h({email:"",password:"",role:"editor"})},className:"bg-gray-300 text-gray-700 px-6 py-2 rounded hover:bg-gray-400 transition",children:"Cancel"})]})]}),(0,r.jsx)("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:(0,r.jsxs)("table",{className:"w-full",children:[(0,r.jsx)("thead",{className:"bg-gray-50",children:(0,r.jsxs)("tr",{children:[(0,r.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Email"}),(0,r.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Role"}),(0,r.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Created At"}),(0,r.jsx)("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"Actions"})]})}),(0,r.jsx)("tbody",{className:"divide-y divide-gray-200",children:e.map(e=>(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",{className:"px-6 py-4",children:(0,r.jsx)("div",{className:"text-sm font-medium text-gray-900",children:e.email})}),(0,r.jsx)("td",{className:"px-6 py-4",children:(0,r.jsx)("span",{className:"px-2 py-1 text-xs rounded capitalize ".concat("admin"===e.role?"bg-cbz-red text-white":"bg-gray-200 text-gray-700"),children:e.role})}),(0,r.jsx)("td",{className:"px-6 py-4 text-sm text-gray-500",children:e.createdAt?new Date(e.createdAt).toLocaleDateString():"N/A"}),(0,r.jsx)("td",{className:"px-6 py-4 text-right text-sm",children:(0,r.jsx)("button",{onClick:()=>y(e.uid),className:"text-red-600 hover:text-red-900",children:"Delete"})})]},e.uid))})]})})]})}}]);