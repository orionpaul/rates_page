{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 10, "column": 0}, "map": {"version":3,"sources":["file:///Users/orionpaul/Documents/projects/rates/app/page.tsx"],"sourcesContent":["'use client';\n\nimport { useEffect, useState } from 'react';\nimport { collection, onSnapshot, query, where, orderBy } from 'firebase/firestore';\nimport { db } from '@/lib/firebase';\nimport { Currency, Media } from '@/types';\nimport Image from 'next/image';\nimport YouTube from 'react-youtube';\n\nexport default function Home() {\n  const [currencies, setCurrencies] = useState<Currency[]>([]);\n  const [media, setMedia] = useState<Media | null>(null);\n  const [currentTime, setCurrentTime] = useState(new Date());\n\n  useEffect(() => {\n    // Listen to currency updates\n    const currenciesQuery = query(\n      collection(db, 'currencies'),\n      orderBy('order', 'asc')\n    );\n\n    const unsubscribeCurrencies = onSnapshot(currenciesQuery, (snapshot) => {\n      const currencyData = snapshot.docs.map((doc) => ({\n        id: doc.id,\n        ...doc.data(),\n      })) as Currency[];\n      setCurrencies(currencyData);\n    });\n\n    // Listen to active media\n    const mediaQuery = query(\n      collection(db, 'media'),\n      where('isActive', '==', true)\n    );\n\n    const unsubscribeMedia = onSnapshot(mediaQuery, (snapshot) => {\n      if (!snapshot.empty) {\n        const mediaData = {\n          id: snapshot.docs[0].id,\n          ...snapshot.docs[0].data(),\n        } as Media;\n        setMedia(mediaData);\n      }\n    });\n\n    // Update time every second\n    const timer = setInterval(() => {\n      setCurrentTime(new Date());\n    }, 1000);\n\n    return () => {\n      unsubscribeCurrencies();\n      unsubscribeMedia();\n      clearInterval(timer);\n    };\n  }, []);\n\n  const getYouTubeVideoId = (url: string) => {\n    const match = url.match(/(?:youtu\\.be\\/|youtube\\.com\\/(?:embed\\/|v\\/|watch\\?v=|watch\\?.+&v=))([^&?]+)/);\n    return match?.[1] || '';\n  };\n\n  return (\n    <main className=\"h-screen w-screen overflow-hidden bg-white flex\">\n      {/* Left Side - Media Display */}\n      <div className=\"w-1/2 h-full bg-black relative\">\n        {media?.type === 'youtube' ? (\n          <div className=\"w-full h-full\">\n            <YouTube\n              videoId={getYouTubeVideoId(media.url)}\n              opts={{\n                height: '100%',\n                width: '100%',\n                playerVars: {\n                  autoplay: 1,\n                  mute: 1,\n                  loop: 1,\n                  controls: 0,\n                  modestbranding: 1,\n                  rel: 0,\n                },\n              }}\n              className=\"w-full h-full\"\n            />\n          </div>\n        ) : media?.type === 'image' ? (\n          <Image\n            src={media.url}\n            alt=\"Advertisement\"\n            fill\n            className=\"object-cover\"\n          />\n        ) : (\n          <div className=\"flex items-center justify-center h-full\">\n            <Image\n              src=\"/logo.png\"\n              alt=\"CBZ Bank Logo\"\n              width={300}\n              height={300}\n              className=\"object-contain\"\n            />\n          </div>\n        )}\n      </div>\n\n      {/* Right Side - Exchange Rates */}\n      <div className=\"w-1/2 h-full bg-gradient-to-br from-blue-50 to-white p-8 flex flex-col\">\n        {/* Header */}\n        <div className=\"flex justify-between items-start mb-6\">\n          <div>\n            <Image\n              src=\"/logo.png\"\n              alt=\"Talk&Pay\"\n              width={200}\n              height={80}\n              className=\"object-contain\"\n            />\n          </div>\n          <div className=\"text-right\">\n            <h1 className=\"text-3xl font-bold text-primary mb-2\">\n              Today&apos;s Exchange Rates\n            </h1>\n            <p className=\"text-gray-600\">\n              {currentTime.toLocaleDateString('en-US', {\n                weekday: 'long',\n                year: 'numeric',\n                month: 'long',\n                day: 'numeric',\n              })}\n            </p>\n            <p className=\"text-gray-600\">\n              {currentTime.toLocaleTimeString('en-US')}\n            </p>\n          </div>\n        </div>\n\n        {/* Rates Table */}\n        <div className=\"flex-1 overflow-auto\">\n          <table className=\"w-full\">\n            <thead>\n              <tr className=\"bg-primary text-white\">\n                <th className=\"py-3 px-4 text-left\">Currency</th>\n                <th className=\"py-3 px-4 text-center\">Buy</th>\n                <th className=\"py-3 px-4 text-center\">Mid</th>\n                <th className=\"py-3 px-4 text-center\">Sell</th>\n              </tr>\n            </thead>\n            <tbody>\n              {currencies.map((currency, index) => (\n                <tr\n                  key={currency.id}\n                  className={`border-b border-gray-200 ${\n                    index % 2 === 0 ? 'bg-white' : 'bg-blue-50'\n                  } hover:bg-blue-100 transition-colors`}\n                >\n                  <td className=\"py-4 px-4\">\n                    <div className=\"flex items-center gap-3\">\n                      {currency.flagUrl && (\n                        <Image\n                          src={currency.flagUrl}\n                          alt={currency.code}\n                          width={32}\n                          height={24}\n                          className=\"rounded\"\n                        />\n                      )}\n                      <div>\n                        <div className=\"font-semibold text-gray-800\">\n                          {currency.code}\n                        </div>\n                        <div className=\"text-xs text-gray-600\">\n                          {currency.name}\n                        </div>\n                      </div>\n                    </div>\n                  </td>\n                  <td className=\"py-4 px-4 text-center font-mono text-lg\">\n                    <span className=\"text-secondary font-bold\">\n                      {currency.buyRate.toFixed(3)}\n                    </span>\n                  </td>\n                  <td className=\"py-4 px-4 text-center font-mono text-lg\">\n                    <span className=\"text-secondary font-bold\">\n                      {currency.midRate.toFixed(3)}\n                    </span>\n                  </td>\n                  <td className=\"py-4 px-4 text-center font-mono text-lg\">\n                    <span className=\"text-secondary font-bold\">\n                      {currency.sellRate.toFixed(3)}\n                    </span>\n                  </td>\n                </tr>\n              ))}\n            </tbody>\n          </table>\n        </div>\n\n        {/* Footer */}\n        <div className=\"mt-4 text-center text-sm text-gray-500\">\n          Rates are indicative and subject to change\n        </div>\n      </div>\n    </main>\n  );\n}\n"],"names":[],"mappings":"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","debugId":null}}]
}